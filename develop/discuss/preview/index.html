<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>W Frame Preview No Script No JS</title>
        <style>
            @import url("../../modules/style.css");
            * {
                margin: 0;
                padding: 0;
                outline: 0;
                font-family: "Open Sans", "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif;
                box-sizing: border-box;
            }
        </style>
        <script>
            let JS_EVENTS = []
            let events = Object.keys(window).filter(e => e.startsWith("on"))
            JS_EVENTS = events.length > 0 ? events : [ "onsearch", "onappinstalled", "onbeforeinstallprompt", "onbeforexrselect", "onabort", "onblur", "oncancel", "oncanplay", "oncanplaythrough", "onchange", "onclick", "onclose", "oncontextmenu", "oncuechange", "ondblclick", "ondrag", "ondragend", "ondragenter", "ondragleave", "ondragover", "ondragstart", "ondrop", "ondurationchange", "onemptied", "onended", "onerror", "onfocus", "onformdata", "oninput", "oninvalid", "onkeydown", "onkeypress", "onkeyup", "onload", "onloadeddata", "onloadedmetadata", "onloadstart", "onmousedown", "onmouseenter", "onmouseleave", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "onmousewheel", "onpause", "onplay", "onplaying", "onprogress", "onratechange", "onreset", "onresize", "onscroll", "onsecuritypolicyviolation", "onseeked", "onseeking", "onselect", "onslotchange", "onstalled", "onsubmit", "onsuspend", "ontimeupdate", "ontoggle", "onvolumechange", "onwaiting", "onwebkitanimationend", "onwebkitanimationiteration", "onwebkitanimationstart", "onwebkittransitionend", "onwheel", "onauxclick", "ongotpointercapture", "onlostpointercapture", "onpointerdown", "onpointermove", "onpointerup", "onpointercancel", "onpointerover", "onpointerout", "onpointerenter", "onpointerleave", "onselectstart", "onselectionchange", "onanimationend", "onanimationiteration", "onanimationstart", "ontransitionrun", "ontransitionstart", "ontransitionend", "ontransitioncancel", "onafterprint", "onbeforeprint", "onbeforeunload", "onhashchange", "onlanguagechange", "onmessage", "onmessageerror", "onoffline", "ononline", "onpagehide", "onpageshow", "onpopstate", "onrejectionhandled", "onstorage", "onunhandledrejection", "onunload", "ondevicemotion", "ondeviceorientation", "ondeviceorientationabsolute", "oncontextlost", "oncontextrestored", "onpointerrawupdate" ]
            function parseNoScript(context) {
                let p = new DOMParser
                let doc = p.parseFromString(context, 'text/html')
                Array.from(doc.body.querySelectorAll('script')).forEach(el => el.remove())
                // doc.documentElement.getInnerHtml()
                // doc.head.remove()
                return doc.body.children
            }
            function noJS(element) {
                JS_EVENTS.forEach(k => {
                    !!element.getAttribute(k) && element.removeAttribute(k)
                })
                return element
            }
            function main(args) {
                let s = location.search
                if (s.startsWith("\?")) {
                    s = s.substr(1)
                }
                let o = {}
                for (let v of s.split("&")) {
                    let t = v.split("=")
                    o[t[0]] = t[1].replace(/\+/g, " ")
                }
                let h = o?.content || ""
                h = decodeURIComponent(h)
                // del script and remove attributes
                Array.from(parseNoScript(h)).forEach(el => {
                    document.body.appendChild(noJS(el))
                })
                return 0
            }
            let p = false;
            let f = (e) => {
                if (document.readyState === "complete" && !p) {
                    p = true
                    main()
                }
            }
            // readyState: "loading", "interactive", "complete"
            window.addEventListener("DOMContentLoaded", f)
            document.addEventListener("load", f)
            window.addEventListener("load", f)
            f(null)
        </script>
    </head>
    <body></body>
</html>